<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Kartenanzeige mit Multimedia-Unterstützung</title>
    <!-- Google Fonts einbinden (optional) -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* Grundlegende Styles */
        :root {
            /* Basis-Schriftgröße für verschiedene Geräte */
            font-size: 16px; /* Standard für Desktop */
        }

        /* Media Queries für unterschiedliche Bildschirmgrößen */
        @media (max-width: 767px) { /* Smartphones */
            :root {
                font-size: 14px; /* Kleinere Basisgröße für kleinere Bildschirme */
            }
        }

        @media (min-width: 768px) and (max-width: 1023px) { /* Tablets */
            :root {
                font-size: 16px; /* Basisgröße beibehalten */
            }
        }

        @media (min-width: 1024px) { /* PCs, Notebooks */
            :root {
                font-size: 18px; /* Größere Basisgröße für größere Bildschirme */
            }
        }

        body {
            font-family: 'Roboto', sans-serif; /* Beispiel mit Google Fonts */
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #f0f0f0;
        }

        /* Navigationsbereich */
        #navigation {
            width: 100%;
            background-color: #f8f8f8;
            padding: 15px 0;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        /* Buttons */
        #navigation button {
            padding: 0.625rem 1.25rem; /* 10px 20px bei 16px Basisgröße */
            margin: 0 0.625rem; /* 10px */
            font-size: 1rem; /* 16px */
            cursor: pointer;
            border: none;
            background-color: #007BFF;
            color: white;
            border-radius: 0.25rem; /* 4px */
            transition: background-color 0.3s;
        }

        #navigation button:hover {
            background-color: #0056b3;
        }

        /* Kartenanzeige */
        #cardContainer {
            border: 1px solid #ccc;
            padding: 1.25rem; /* 20px */
            margin: 1.25rem; /* 20px */
            width: 80%;
            max-width: 800px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            background-color: #fff;
            border-radius: 0.5rem; /* 8px */
            display: flex;
            flex-direction: column; /* Standardmäßig Spaltenlayout */
            align-items: center;
            position: relative; /* Für Swipe-Gesten */
            overflow: hidden; /* Optional: Verhindert das Überschreiten der Grenzen */
            touch-action: pan-y; /* Ermöglicht vertikales Scrollen und horizontales Wischen */
        }

        /* Container für Text und Bild */
        .cardContent {
            display: flex;
            flex-direction: column; /* Standardmäßig Spaltenlayout */
            align-items: center;
            width: 100%;
        }

        /* Textbereich */
        .cardText {
            flex: 1;
        }

        /* Titel */
        #titel {
            margin-top: 0;
            font-size: 1.5rem; /* 24px bei 16px Basisgröße */
            color: #333;
        }

        /* Haupttext */
        #maintext {
            font-size: 1.125rem; /* 18px */
            color: #555;
            line-height: 1.6;
        }

        /* Warnhinweis */
        .warning {
            color: red;
            font-weight: bold;
            margin-top: 0.625rem; /* 10px */
            font-size: 1rem; /* 16px */
        }

        /* Bildbereich */
        .cardImage {
            margin-top: 1.25rem; /* 20px */
            width: 256px; /* Feste Breite für das Media */
            height: 256px; /* Feste Höhe für das Media */
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        /* Bild */
        .cardImage img,
        .cardImage video,
        .cardImage audio {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain; /* Beibehaltung der Aspect Ratio */
        }

        /* Kartenzähler */
        #cardCounter {
            display: block;
            margin-top: 0.9375rem; /* 15px */
            font-weight: bold;
            text-align: center;
            color: #666;
            font-size: 1rem; /* 16px */
        }

        /* Responsive Design für Landscape-Ansicht */
        @media (min-width: 768px) {
            .cardContent {
                flex-direction: row; /* Reihenlayout für größere Bildschirme */
                align-items: flex-start;
            }
            .cardText {
                flex: 2;
                margin-right: 1.25rem; /* 20px */
            }
            .cardImage {
                flex: 1;
                margin-top: 0;
            }
        }

        /* Responsive Anpassung für kleinere Bildschirme */
        @media (max-width: 767px) {
            .cardImage {
                width: 100%;
                height: auto;
            }
            #cardContainer {
                width: 95%;
            }

            /* Angepasste Schriftgröße für kleinere Bildschirme */
            #navigation button {
                padding: 0.5rem 1rem; /* 8px 16px bei 16px Basisgröße */
                margin: 0 0.5rem; /* 8px */
                font-size: 0.875rem; /* 14px */
            }

            #titel {
                font-size: 1.25rem; /* 20px */
            }

            #maintext {
                font-size: 1rem; /* 16px */
            }

            .warning {
                font-size: 0.875rem; /* 14px */
            }

            #cardCounter {
                font-size: 0.875rem; /* 14px */
            }
        }

    </style>
</head>
<body>

    <!-- Navigationsbereich oben -->
    <div id="navigation">
        <button id="prevBtn">← Vorherige</button>
        <button id="nextBtn">Nächste →</button>
    </div>

    <!-- Kartenanzeige -->
    <div id="cardContainer">
        <div class="cardContent">
            <div class="cardText">
                <h2 id="titel">Titel</h2>
                <p id="maintext">Haupttext</p>
                <p class="warning" id="warning">Warnung</p>
            </div>
            <div class="cardImage" id="mediaContainer">
                <!-- Dynamische Medieninhalte (img, video, audio) werden hier eingefügt -->
            </div>
        </div>
        <span id="cardCounter">1 / 53</span>
    </div>

    <script>
        // JSON-Daten als JavaScript-Variable
        const cards = [
            {
                "CardNumber": "1",
                "Titel": "Deckel Maho DMC 50H",
                "Maintext": "Schalten Sie den Luftdruck ein. Hierzu muss der Luftdruckhahn hinter der Fräsmaschine aufgedreht werden.",
                "Warning": "Wichtig: Ausgangszustand wie in Dokument „Vorbereitung und Einrichtung“ beschrieben, herstellen.",
                "Media": "8.jpg",
                "SwitchOn": "0",
                "SelectedCard": "none"
            },
            {
                "CardNumber": "2",
                "Titel": "Deckel Maho DMC 50H",
                "Maintext": "Schalten Sie den Hauptschalter ein.",
                "Warning": "Wichtig: Warten Sie ab bis die Maschine vollständig hochgefahren ist. Beachten Sie das Display. Die Tür muss zudem geschlossen sein.",
                "Media": "4.jpg",
                "SwitchOn": "0",
                "SelectedCard": "none"
            },
            {
                "CardNumber": "3",
                "Titel": "Deckel Maho DMC 50H",
                "Maintext": "Als nächstes fahren Sie die Hydraulik hoch.",
                "Warning": "Achtung: Die Taste muss leuchten!",
                "Media": "40.mp4", // Beispiel für Video
                "SwitchOn": "0",
                "SelectedCard": "none"
            },
            {
                "CardNumber": "4",
                "Titel": "Deckel Maho DMC 50H",
                "Maintext": "Testen Sie den Lautsprecher.",
                "Warning": "none",
                "Media": "40.mp3", // Beispiel für Audio
                "SwitchOn": "0",
                "SelectedCard": "none"
            },
            // ... (Fügen Sie alle weiteren Karten hier ein) ...
            {
                "CardNumber": "53",
                "Titel": "Deckel Maho DMC 50H",
                "Maintext": "Zuletzt drehen Sie die Druckluft zu.",
                "Warning": "none",
                "Media": "38.jpg",
                "SwitchOn": "0",
                "SelectedCard": "none"
            }
        ];

        let currentIndex = 0; // Start bei der ersten Karte

        // Funktion zum Aktualisieren der Anzeige
        function updateCard() {
            const card = cards[currentIndex];
            document.getElementById('titel').textContent = card.Titel;
            document.getElementById('maintext').textContent = card.Maintext;

            const warningElem = document.getElementById('warning');
            if (card.Warning && card.Warning.toLowerCase() !== "none") {
                warningElem.textContent = card.Warning;
                warningElem.style.display = 'block';
            } else {
                warningElem.textContent = "";
                warningElem.style.display = 'none';
            }

            const mediaContainer = document.getElementById('mediaContainer');
            mediaContainer.innerHTML = ''; // Vorherigen Inhalt löschen

            if (card.Media && card.Media.toLowerCase() !== "none") {
                const mediaExtension = card.Media.split('.').pop().toLowerCase();
                let mediaElement;

                if (['jpg', 'jpeg', 'png', 'gif', 'bmp', 'svg'].includes(mediaExtension)) {
                    // Bild anzeigen
                    mediaElement = document.createElement('img');
                    mediaElement.src = 'media/' + card.Media;
                    mediaElement.alt = `Bild für Karte ${card.CardNumber}`;
                } else if (['mp4', 'webm', 'ogg'].includes(mediaExtension)) {
                    // Video anzeigen
                    mediaElement = document.createElement('video');
                    mediaElement.src = 'media/' + card.Media;
                    mediaElement.controls = true;
                    mediaElement.autoplay = false;
                    mediaElement.loop = false;
                    mediaElement.preload = 'metadata';
                    mediaElement.alt = `Video für Karte ${card.CardNumber}`;
                } else if (['mp3', 'wav', 'ogg'].includes(mediaExtension)) {
                    // Audio anzeigen
                    mediaElement = document.createElement('audio');
                    mediaElement.src = 'media/' + card.Media;
                    mediaElement.controls = true;
                    mediaElement.autoplay = false;
                    mediaElement.loop = false;
                    mediaElement.preload = 'metadata';
                    mediaElement.alt = `Audio für Karte ${card.CardNumber}`;
                }

                if (mediaElement) {
                    mediaContainer.appendChild(mediaElement);
                    mediaContainer.style.display = 'flex';
                } else {
                    mediaContainer.style.display = 'none';
                }
            } else {
                mediaContainer.style.display = 'none';
            }

            document.getElementById('cardCounter').textContent = (currentIndex + 1) + " / " + cards.length;
        }

        // Event-Listener für die Buttons
        document.getElementById('prevBtn').addEventListener('click', function() {
            if (currentIndex > 0) {
                currentIndex--;
                updateCard();
            }
        });

        document.getElementById('nextBtn').addEventListener('click', function() {
            if (currentIndex < cards.length - 1) {
                currentIndex++;
                updateCard();
            }
        });

        // Initiale Anzeige
        updateCard();

        // Swipe-Gesten-Implementierung
        const cardContainer = document.getElementById('cardContainer');
        let touchStartX = 0;
        let touchEndX = 0;
        const swipeThreshold = 50; // Mindest-Scroll-Distanz in Pixeln, um als Swipe erkannt zu werden

        cardContainer.addEventListener('touchstart', function(event) {
            touchStartX = event.changedTouches[0].screenX;
        }, false);

        cardContainer.addEventListener('touchend', function(event) {
            touchEndX = event.changedTouches[0].screenX;
            handleSwipeGesture();
        }, false);

        function handleSwipeGesture() {
            const swipeDistance = touchEndX - touchStartX;
            if (Math.abs(swipeDistance) > swipeThreshold) {
                if (swipeDistance < 0) {
                    // Swipe nach links -> Nächste Karte
                    if (currentIndex < cards.length - 1) {
                        currentIndex++;
                        updateCard();
                    }
                } else {
                    // Swipe nach rechts -> Vorherige Karte
                    if (currentIndex > 0) {
                        currentIndex--;
                        updateCard();
                    }
                }
            }
        }

        // Optional: Mausgesten für Desktop (Drag)
        let isDragging = false;
        let dragStartX = 0;
        let dragEndX = 0;

        cardContainer.addEventListener('mousedown', function(event) {
            isDragging = true;
            dragStartX = event.screenX;
        }, false);

        cardContainer.addEventListener('mouseup', function(event) {
            if (isDragging) {
                dragEndX = event.screenX;
                handleDragGesture();
                isDragging = false;
            }
        }, false);

        function handleDragGesture() {
            const dragDistance = dragEndX - dragStartX;
            if (Math.abs(dragDistance) > swipeThreshold) {
                if (dragDistance < 0) {
                    // Drag nach links -> Nächste Karte
                    if (currentIndex < cards.length - 1) {
                        currentIndex++;
                        updateCard();
                    }
                } else {
                    // Drag nach rechts -> Vorherige Karte
                    if (currentIndex > 0) {
                        currentIndex--;
                        updateCard();
                    }
                }
            }
        }

        // Deaktivierung des Zoomens durch Doppelklick
        document.body.addEventListener('dblclick', function(event) {
            event.preventDefault();
        }, false);

        // Tastatur-Navigation mit Pfeiltasten
        document.addEventListener('keydown', function(event) {
            if (event.key === 'ArrowLeft') {
                // Linke Pfeiltaste gedrückt -> Vorherige Karte
                if (currentIndex > 0) {
                    currentIndex--;
                    updateCard();
                }
            } else if (event.key === 'ArrowRight') {
                // Rechte Pfeiltaste gedrückt -> Nächste Karte
                if (currentIndex < cards.length - 1) {
                    currentIndex++;
                    updateCard();
                }
            }
        }, false);
    </script>

</body>
</html>
